<div ng-show="$ctrl.isLoading">
	加載中...
</div>

<div class="container-fluid" ng-hide="$ctrl.isLoading">
	<h3>在 href-transitioning 下， $stateChangeSuccess 不能被觸發。</h3>
	<div class="panel panel-primary">
		<div class="panel-body">
			<p>我這結論對不？除非我用 $state.transitinoTo，否則 $stateChangeSuccess 不能被觸發。</p>
			<pre class="pre-scrollable">
//in app config
.state('detail.zoom', {
        url: '/zoom/{itemId}',
        templateUrl: 'detail/zoom-partial.html'
    })

//in html
&lt;a href="#/zoom/{{item.id}}" &gt;ZOOM IT!&lt;/a&gt;

//in directive
scope.$state.transitionTo('detail.zoom', { itemId: item.id});

//in some controller
$scope.$on('$stateChangeSuccess', function () {alert('done transitioning!')});
			</pre>
			<p>transitionTo 的事件會觸發 $stateChangeSuccess，但 href 的版于郤不能，請問是否有辦法兩種事件也可同時觸發？</p>
			<p><small><mark>angularjs</mark>&nbsp;&nbsp;<mark>angularjs-routing</mark></small></p>
			<hr>
			<div class="row">
				<div class="col-sm-3">
					<p><span class="glyphicon glyphicon-arrow-up text-primary" title="這問題對我有幫助"></span>&nbsp;<strong class="text-info">1</strong>&nbsp;<span class="glyphicon glyphicon-arrow-down text-primary" title="這問題對我沒有幫助"></span>&nbsp;&nbsp;<span class="glyphicon glyphicon-star-empty text-warning"></span></p>
					<p><a href="#">edit</a>
				</div>
				<div class="col-sm-9">
					<div class="pull-right userBox">
						<div class="row">
							<div class="col-xs-3">
								<img class="userBoxAvatar" src="{{:: $ctrl.users[0].avatar }}">
							</div>
							<div class="col-xs-9">
								<p class="text-muted"><small>問於 2013-08-02 08:02</small></p>
								<p class="text-muted"><small>{{:: $ctrl.users[0].username }}</small></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<hr>
			<ul class="list-group">
				<li class="list-group-item"><small class="text-muted">或許你應該試試 $routeChangeSuccess - <a href="#">CodeHater</a> <span class="text-muted">2013-08-02 08:06</span></small></li>
				<li class="list-group-item"><small class="text-muted">@Codezilla, 我可以試，但我很懷疑，因我用的是 angular-ui/ui-router，一個不同於 angularjs 的類，不是默認的 routeProvider。 - <a href="#">{{:: $ctrl.users[0].username }}</a> <span class="text-muted">2013-08-02 08:18</span></small></li>
				<li class="list-group-item"><small class="text-muted">噢，我知道我犯了甚麼錯了，我有一個 nested state 但我並沒有在 href 處用全 url。 - <a href="#">{{:: $ctrl.users[0].username }}</a> <span class="text-muted">2013-08-02 08:24</span></small></li>
				<li class="list-group-item"><small><a href="#" class="text-muted">加入評語</a></small></li>
			</ul>
		</div>
	</div>
	<h4>4 個答案</h4>
	<div class="panel panel-primary">
		<div class="panel-body">
			<p>我覺得你似乎正在使用 nested state，那個叫「detail」的 state 是否應該有一個分離的 url，即全 url 是 url:'/detail{itemID}/zoom'？</p>
			<hr>
			<div class="row">
				<div class="col-sm-3">
					<p><span class="glyphicon glyphicon-arrow-up text-primary" title="這答案對我有幫助"></span>&nbsp;<strong class="text-info">1</strong>&nbsp;<span class="glyphicon glyphicon-arrow-down text-primary" title="這答案對我沒有幫助"></span>&nbsp;&nbsp;<span class="glyphicon glyphicon-ok text-danger"></span></p>
					<p><a href="#">edit</a>
				</div>
				<div class="col-sm-9">
					<div class="pull-right userBox">
						<div class="row">
							<div class="col-xs-3">
								<img class="userBoxAvatar" src="{{:: $ctrl.users[1].avatar }}">
							</div>
							<div class="col-xs-9">
								<p class="text-muted"><small>答於 2013-08-02 08:02</small></p>
								<p class="text-muted"><small>{{:: $ctrl.users[1].username }}</small></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<hr>
			<ul class="list-group">
				<li class="list-group-item"><small class="text-muted">對，這正是我所錯的，謝謝！我對以部份 url 設置 state 設定有些混亂，在 html 內，當然是會使用全 url 的。 - <a href="#">{{:: $ctrl.users[0].username }}</a> <span class="text-muted">2013-08-02 08:31</span></small></li>
				<li class="list-group-item"><small><a href="#" class="text-muted">加入評語</a></small></li>
			</ul>
		</div>
	</div>
	<div class="panel panel-primary">
		<div class="panel-body">
			<p>試試:</p>
			<pre class="pre-scrollable">
$rootScope.$on('$stateChangeSuccess', function () {
	alert('done transitioning!')
});
			</pre>
			<hr>
			<div class="row">
				<div class="col-sm-3">
					<p><span class="glyphicon glyphicon-arrow-up text-primary" title="這答案對我有幫助"></span>&nbsp;<strong class="text-info">1</strong>&nbsp;<span class="glyphicon glyphicon-arrow-down text-primary" title="這答案對我沒有幫助"></span></p>
					<p><a href="#">edit</a>
				</div>
				<div class="col-sm-9">
					<div class="pull-right userBox">
						<div class="row">
							<div class="col-xs-3">
								<img class="userBoxAvatar" src="{{:: $ctrl.users[2].avatar }}">
							</div>
							<div class="col-xs-9">
								<p class="text-muted"><small>答於 2015-05-05 12:26</small></p>
								<p class="text-muted"><small>{{:: $ctrl.users[2].username }}</small></p>
							</div>
						</div>
					</div>
					<div class="pull-right userBox">
						<div class="row">
							<div class="col-xs-3">
								<img class="userBoxAvatar" src="{{:: $ctrl.users[3].avatar }}">
							</div>
							<div class="col-xs-9">
								<p><small class="text-muted">修改於 2015-05-05 13:00</small></p>
								<p><small class="text-muted">{{:: $ctrl.users[3].username }}</small></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<hr>
			<ul class="list-group">
				<li class="list-group-item"><small class="text-muted">這或許是一個答案，但若加入解釋此代碼如何生效的話，這將會是一大改進。 - <a href="#">11684</a> <span class="text-muted">2013-08-02 08:31</span></small></li>
				<li class="list-group-item"><small><a href="#" class="text-muted">加入評語</a></small></li>
			</ul>
		</div>
	</div>
	<div class="panel panel-primary">
		<div class="panel-body">
			<p>在你的指令裡，可否試試 scope.$apply()？</p>
			<pre class="pre-scrollable">
//in directive
scope.$state.transitionTo('detail.zoon', { itemId: item.id});
scope.$apply();
			</pre>
			<hr>
			<div class="row">
				<div class="col-sm-3">
					<p><span class="glyphicon glyphicon-arrow-up text-primary" title="這答案對我有幫助"></span>&nbsp;<strong class="text-info">0</strong>&nbsp;<span class="glyphicon glyphicon-arrow-down text-primary" title="這答案對我沒有幫助"></span></p>
					<p><a href="#">edit</a>
				</div>
				<div class="col-sm-9">
					<div class="pull-right userBox">
						<div class="row">
							<div class="col-xs-3">
								<img class="userBoxAvatar" src="{{:: $ctrl.users[4].avatar }}">
							</div>
							<div class="col-xs-9">
								<p><small class="text-muted">答於 2015-08-02 08:22</small></p>
								<p><small class="text-muted">{{:: $ctrl.users[4].username }}</small></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<hr>
			<ul class="list-group">
				<li class="list-group-item"><small class="text-muted">scope.$state.transitionTo 沒有問題，所以不需要 $apply()，只是那個 href 不能啟動事件。謝謝！ - <a href="#">{{:: $ctrl.users[0].username }}</a> <span class="text-muted">2013-08-02 08:31</span></small></li>
				<li class="list-group-item"><small><a href="#" class="text-muted">加入評語</a></small></li>
			</ul>
		</div>
	</div>
	<div class="panel panel-primary">
		<div class="panel-body">
			<p>你可用一個 ^ 符號縮少 nested URLs。</p>
			<pre class="pre-scrollable">
.state('detail.zoom', {
	url: '^/zoom/{itemId}',
	templateUrl: 'detail/zoom-partial.html'
})

&lt;a href="#/zoom/{{item.id}}" &gt;ZOOM IT!&lt;/a&gt;
			</pre>
			<hr>
			<div class="row">
				<div class="col-sm-3">
					<p><span class="glyphicon glyphicon-arrow-up text-primary" title="這答案對我有幫助"></span>&nbsp;<strong class="text-info">0</strong>&nbsp;<span class="glyphicon glyphicon-arrow-down text-primary" title="這答案對我沒有幫助"></span></p>
					<p><a href="#">edit</a>
				</div>
				<div class="col-sm-9">
					<div class="pull-right userBox">
						<div class="row">
							<div class="col-xs-3">
								<img class="userBoxAvatar" src="{{:: $ctrl.users[5].avatar }}">
							</div>
							<div class="col-xs-9">
								<p><small class="muted">答於 2013-02-13 10:22</small></p>
								<p><small class="muted">{{:: $ctrl.users[5].username }}</small></p>
							</div>
						</div>
					</div>
				</div>
			</div>
			<hr>
			<ul class="list-group">
				<li class="list-group-item"><small><a href="#" class="text-muted">加入評語</a></small></li>
			</ul>
		</div>
	</div>
</div>